<div align="center">

# ğŸš€ EZCTest - æè‡´ç®€å•çš„ C/C++ å•å…ƒæµ‹è¯•æ¡†æ¶

**ä¸€ä¸ªè®©æµ‹è¯•å˜å¾—ç®€å•è€Œä¼˜é›…çš„å•å¤´æ–‡ä»¶æ¡†æ¶**

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE.txt)
[![C99](https://img.shields.io/badge/standard-C99-green.svg)](https://en.wikipedia.org/wiki/C99)
[![C++](https://img.shields.io/badge/C%2B%2B-compatible-orange.svg)](https://en.cppreference.com/w/)
[![Platform](https://img.shields.io/badge/platform-Windows%20%7C%20Linux%20%7C%20macOS%20%7C%20STM32-lightgrey.svg)](README.md)
[![Version](https://img.shields.io/badge/version-3.9.0-brightgreen.svg)](ezctest.h)

**[English](README_en.md) | ç®€ä½“ä¸­æ–‡**

</div>

## ğŸŒŸ æ¡†æ¶ç®€ä»‹

**EZCTest** æ˜¯ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„**è·¨å¹³å°ã€å•å¤´æ–‡ä»¶ã€å…¨ç¼–è¯‘å™¨å…¼å®¹**çš„C/C++å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚å®ƒçªç ´äº†ä¼ ç»Ÿæµ‹è¯•æ¡†æ¶çš„é™åˆ¶ï¼Œä» 1998 å¹´çš„ Visual Studio 6.0 åˆ° 2026 å¹´çš„æœ€æ–°ç¼–è¯‘å™¨ï¼Œä» Windows XP åˆ°ç°ä»£ Linux/macOSï¼Œä»æ¡Œé¢åº”ç”¨åˆ° STM32 åµŒå…¥å¼ç³»ç»Ÿâ€”â€”**åªéœ€ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œå³å¯åœ¨ä»»ä½•ç¯å¢ƒä¸‹å¼€å§‹æµ‹è¯•**ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæµ‹è¯•å·¥å…·ï¼Œæ›´æ˜¯ä¸€ä¸ªå åŠ äº† 15+ å¹´å·¥ç¨‹ç»éªŒã€èåˆäº†ç°ä»£è½¯ä»¶å·¥ç¨‹ç†å¿µçš„æµ‹è¯•è§£å†³æ–¹æ¡ˆã€‚æ— è®ºä½ é¢å¯¹çš„æ˜¯é™ˆæ—§çš„é—ç•™ä»£ç åº“ï¼Œè¿˜æ˜¯æœ€æ–°çš„é¡¹ç›®ï¼ŒEZCTest éƒ½èƒ½ä»¥åŒæ ·ä¼˜é›…çš„æ–¹å¼ä¸ºä½ æä¾›å¯é çš„æµ‹è¯•æ”¯æŒã€‚

---

## âœ¨ ä¸ºä»€ä¹ˆé€‰æ‹© EZCTestï¼Ÿ

åœ¨ä¼—å¤šCè¯­è¨€æµ‹è¯•æ¡†æ¶ä¸­ï¼Œ**EZCTest** è„±é¢–è€Œå‡ºçš„åŸå› ï¼š

- ğŸ¯ **æè‡´ç®€å•** - åªéœ€åŒ…å«ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œ5è¡Œä»£ç å¼€å§‹æµ‹è¯•
- ğŸ’ª **åŠŸèƒ½å¼ºå¤§** - åª²ç¾ Google Test çš„å®Œæ•´æ–­è¨€ä½“ç³»
- ğŸ”„ **èµ„æºå®‰å…¨** - ç‹¬åˆ›çš„å››å±‚èµ„æºä¿æŠ¤æœºåˆ¶ï¼Œå½»åº•é¿å…æ³„æ¼
- ğŸŒ **æ— ä¸ä¼¦æ¯”çš„å…¼å®¹æ€§** - 21 ä¸ªç¼–è¯‘å™¨ç¯å¢ƒå…¨è¦†ç›–ï¼ˆVC6 åˆ° VS2026ï¼ŒGCC 3.2.3+ï¼‰
- âš¡ **é›¶ä¾èµ–** - çº¯ C99 å®ç°ï¼Œä¸éœ€è¦ä»»ä½•å¤–éƒ¨åº“
- ğŸ¨ **ç°ä»£åŒ–ä½“éªŒ** - å½©è‰²è¾“å‡ºã€è¿‡æ»¤å™¨ã€äº¤äº’å¼æ¨¡å¼
- ğŸ”¬ **åµŒå…¥å¼å‹å¥½** - æ·±åº¦ä¼˜åŒ–çš„ STM32 æ”¯æŒå’Œäº¤äº’å¼è°ƒè¯•
- ğŸ›¡ï¸ **ç”Ÿäº§çº§è´¨é‡** - å·±å åŠ ä½œè€… 15+ å¹´å®æˆ˜å·¥ç¨‹ç»éªŒ

> ğŸ’¡ **è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæµ‹è¯•æ¡†æ¶ï¼Œæ›´æ˜¯ä¸€ä¸ªè®© C/C++ æµ‹è¯•å˜å¾—ä¼˜é›…çš„è‰ºæœ¯å“ã€‚**

---

## ğŸ¬ å¿«é€Ÿä½“éªŒ

### 5 è¡Œä»£ç ï¼Œå¼€å¯æµ‹è¯•ä¹‹æ—…

```c
#define EZCTEST_IMPLEMENTATION //è¿™è¡Œä»£ç åªéœ€è¦åœ¨ä¸€ä¸ªå·¥ç¨‹ä¸­çš„ä¸€ä¸ªcæ–‡ä»¶æˆ–è€…cppæ–‡ä»¶ä¸­å‡ºç°ä¸€æ¬¡.
#include "ezctest.h"

TEST(HelloWorld, FirstTest) {
    EXPECT_EQ(1 + 1, 2);
}

int main(int argc, char* argv[]) {
    return RUN_ALL_TESTS(argc, argv);
}
```

ç¼–è¯‘è¿è¡Œï¼š
```bash
gcc test.c -o test && ./test
```

è¾“å‡ºï¼š
```sh
[==========] Running 1 test(s)
[ RUN      ] HelloWorld.FirstTest
[       OK ] HelloWorld.FirstTest (0 ms)
[==========] 1 test(s) ran (0 ms total)
[  PASSED  ] 1 test(s)
```

**å°±è¿™ä¹ˆç®€å•ï¼** å¦ç™½è¯´ï¼Œè¿™å‡ è¡Œä»£ç è¶³ä»¥åº”å¯¹æˆ‘æ•´ä¸ªèŒä¸šç”Ÿæ¶¯ä¸­ 99% çš„å•å…ƒæµ‹è¯•åœºæ™¯ã€‚

---

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

### 1ï¸âƒ£ å®Œæ•´çš„æ–­è¨€ä½“ç³»

ç±»ä¼¼ Google Test çš„ä¸°å¯Œæ–­è¨€ï¼Œè®©æµ‹è¯•è¡¨è¾¾æ›´æ¸…æ™°ï¼š

```c
// åŸºæœ¬æ¯”è¾ƒ
EXPECT_EQ(actual, expected);      // ç›¸ç­‰
EXPECT_NE(a, b);                  // ä¸ç­‰
EXPECT_LT(a, b);                  // å°äº
EXPECT_LE(a, b);                  // å°äºç­‰äº
EXPECT_GT(a, b);                  // å¤§äº
EXPECT_GE(a, b);                  // å¤§äºç­‰äº

// å¸ƒå°”æ–­è¨€
EXPECT_TRUE(condition);
EXPECT_FALSE(condition);

// å­—ç¬¦ä¸²æ–­è¨€
EXPECT_STREQ("hello", str);       // å­—ç¬¦ä¸²ç›¸ç­‰
EXPECT_STRNE("hello", "world");   // å­—ç¬¦ä¸²ä¸ç­‰

// æŒ‡é’ˆæ–­è¨€
EXPECT_NULL(ptr);
EXPECT_NOT_NULL(ptr);

// æµ®ç‚¹æ•°æ–­è¨€ï¼ˆå¤„ç†ç²¾åº¦é—®é¢˜ï¼‰
EXPECT_FLOAT_EQ(0.1f + 0.2f, 0.3f);
EXPECT_DOUBLE_EQ(result, 3.14159265358979);
EXPECT_NEAR(measured, 100.0, 0.5);  // å…è®¸è¯¯å·®
```

**EXPECT vs ASSERT**ï¼š
- `EXPECT_*` - å¤±è´¥åç»§ç»­æ‰§è¡Œï¼ˆé€‚åˆå¤šä¸ªæ£€æŸ¥ç‚¹ï¼‰
- `ASSERT_*` - å¤±è´¥åç«‹å³è¿”å›ï¼ˆé€‚åˆå‰ç½®æ¡ä»¶ï¼‰

### 2ï¸âƒ£ ç‹¬åˆ›çš„å››å±‚èµ„æºä¿æŠ¤æœºåˆ¶

è¿™æ˜¯ EZCTest æœ€å¼•ä»¥ä¸ºå‚²çš„åˆ›æ–°ï¼ç¡®ä¿**ä»»ä½•æƒ…å†µä¸‹èµ„æºéƒ½ä¸ä¼šæ³„æ¼**ï¼š

```c
TEST(ResourceSafe, CompleteProtection) {
    // ç¬¬ä¸€å±‚ï¼šDEFER æ¸…ç†å›è°ƒï¼ˆç±»ä¼¼ Go çš„ deferï¼‰
    char* buffer = malloc(1024);
    DEFER(free, buffer);
    
    FILE* fp = fopen("test.txt", "r");
    DEFER((ezctest_cleanup_func_t)fclose, fp);
    
    // ç¬¬äºŒå±‚ï¼šlongjmp å¼‚å¸¸å¤„ç†
    ASSERT_NOT_NULL(fp);  // å³ä½¿å¤±è´¥ï¼ŒDEFER ä¹Ÿä¼šæ‰§è¡Œ
    
    // ç¬¬ä¸‰å±‚ï¼šC++ å¼‚å¸¸æ•è· / Windows SEH æ•è·
    // è‡ªåŠ¨å¤„ç†å¼‚å¸¸ï¼Œç¡®ä¿æ¸…ç†
    
    // ç¬¬å››å±‚ï¼šå¤šè¿›ç¨‹éš”ç¦»
    // è¿›ç¨‹å´©æºƒä¹Ÿèƒ½è‡ªåŠ¨å›æ”¶èµ„æº
}
```

**å››å±‚é˜²æŠ¤å¯¹æ¯”è¡¨**ï¼š

| åœºæ™¯ | DEFER | longjmp | å¼‚å¸¸æ•è· | è¿›ç¨‹éš”ç¦» | ç»“æœ |
|------|-------|---------|----------|----------|------|
| æ­£å¸¸é€šè¿‡ | âœ… | - | - | - | âœ… èµ„æºé‡Šæ”¾ |
| EXPECT å¤±è´¥ | âœ… | - | - | - | âœ… èµ„æºé‡Šæ”¾ |
| ASSERT å¤±è´¥ | âœ… | âœ… | - | - | âœ… èµ„æºé‡Šæ”¾ |
| C++ å¼‚å¸¸ | âœ… | âœ… | âœ… | - | âœ… èµ„æºé‡Šæ”¾ |
| SEH å¼‚å¸¸ | âœ… | âœ… | âœ… | - | âœ… èµ„æºé‡Šæ”¾ |
| è¿›ç¨‹å´©æºƒ | - | - | - | âœ… | âœ… OS å›æ”¶ |

> ğŸ“Œ **æ— è®ºä»€ä¹ˆæƒ…å†µï¼Œèµ„æºéƒ½æœ‰ä¿æŠ¤æœºåˆ¶ï¼**

### 3ï¸âƒ£ Setup/Teardown æµ‹è¯•å¤¹å…·

ç±»ä¼¼ Google Test çš„ Fixtureï¼Œè‡ªåŠ¨ç®¡ç†æµ‹è¯•ç¯å¢ƒï¼š

```c
// æ¯ä¸ªæµ‹è¯•å‰è‡ªåŠ¨è°ƒç”¨
SETUP(DatabaseTest) {
    init_database();
    connect_to_db();
}

// æ¯ä¸ªæµ‹è¯•åè‡ªåŠ¨è°ƒç”¨ï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰
TEARDOWN(DatabaseTest) {
    disconnect_from_db();
    cleanup_database();
}

TEST(DatabaseTest, InsertUser) {
    // Setup å·²è‡ªåŠ¨æ‰§è¡Œ
    User user = {"Alice", 25};
    EXPECT_TRUE(insert_user(&user));
    // Teardown ä¼šè‡ªåŠ¨æ‰§è¡Œ
}

TEST(DatabaseTest, QueryUser) {
    // æ¯ä¸ªæµ‹è¯•éƒ½æœ‰ç‹¬ç«‹çš„ Setup/Teardown
    EXPECT_NOT_NULL(query_user("Alice"));
}
```

### 4ï¸âƒ£ å¤šè¿›ç¨‹éš”ç¦»

æ¯ä¸ªæµ‹è¯•åœ¨ç‹¬ç«‹è¿›ç¨‹ä¸­è¿è¡Œï¼Œå½»åº•éš”ç¦»å´©æºƒå½±å“ï¼š

```c
TEST(CrashTest, SegmentationFault) {
    int* ptr = NULL;
    *ptr = 42;  // æ®µé”™è¯¯ï¼
    // ä¸ä¼šå½±å“å…¶ä»–æµ‹è¯•
}

TEST(NormalTest, StillRuns) {
    // å³ä½¿ä¸Šé¢çš„æµ‹è¯•å´©æºƒäº†ï¼Œè¿™ä¸ªæµ‹è¯•ä»ç„¶ä¼šè¿è¡Œ
    EXPECT_EQ(2 + 2, 4);
}
```

**æ™ºèƒ½å†³ç­–**ï¼š
- âœ… è°ƒè¯•æ¨¡å¼ï¼šè‡ªåŠ¨ç¦ç”¨ï¼ˆæ–¹ä¾¿è°ƒè¯•ï¼‰
- âœ… å•ä¸ªæµ‹è¯•ï¼šè‡ªåŠ¨ç¦ç”¨ï¼ˆæ— éœ€éš”ç¦»ï¼‰
- âœ… å¤šä¸ªæµ‹è¯•ï¼šè‡ªåŠ¨å¯ç”¨ï¼ˆæœ€å¼ºä¿æŠ¤ï¼‰

**å¹³å°æ”¯æŒ**ï¼š
- Linuxï¼š`fork()` å®ç°
- Windowsï¼š`CreateProcess()` å®ç°
- STM32ï¼šä¸æ”¯æŒï¼ˆå•ç‰‡æœºæ— è¿›ç¨‹ï¼‰

### 5ï¸âƒ£ å¼ºå¤§çš„å‘½ä»¤è¡ŒåŠŸèƒ½

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
./test

# è¿‡æ»¤æµ‹è¯•ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰
./test --ctest_filter=Math.*
./test --ctest_filter=*Fast*
./test --ctest_filter=*:-*Slow*  # æ’é™¤æ…¢é€Ÿæµ‹è¯•

# é‡å¤è¿è¡Œï¼ˆæ£€æµ‹ä¸ç¨³å®šæµ‹è¯•ï¼‰
./test --ctest_repeat=100

# éšæœºé¡ºåºï¼ˆæ£€æµ‹æµ‹è¯•ä¾èµ–ï¼‰
./test --ctest_shuffle

# åˆ—å‡ºæ‰€æœ‰æµ‹è¯•
./test --ctest_list_tests

# å½©è‰²è¾“å‡ºæ§åˆ¶
./test --ctest_color=yes

# ç¦ç”¨è¿›ç¨‹éš”ç¦»ï¼ˆè°ƒè¯•ç”¨ï¼‰
./test --ezctest_no_exec
```

### 6ï¸âƒ£ STM32 åµŒå…¥å¼æ”¯æŒ

ä¸“ä¸ºåµŒå…¥å¼ä¼˜åŒ–çš„äº¤äº’å¼æµ‹è¯•æ¨¡å¼ï¼š

```c
#define EZCTEST_STM32_MODE
#define EZCTEST_STM32_INTERACTIVE
#define EZCTEST_IMPLEMENTATION
#include "ezctest.h"

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_USART1_UART_Init();  // printf é‡å®šå‘
    
    RUN_TESTS_INTERACTIVE();  // äº¤äº’å¼å‘½ä»¤è¡Œ
    
    while (1) {}
}
```

**ä¸²å£ç»ˆç«¯äº¤äº’**ï¼š
```
EZCTest Interactive Mode
Type 'help' for commands

> run              # è¿è¡Œæ‰€æœ‰æµ‹è¯•
> run GPIO*        # è¿è¡ŒåŒ¹é…çš„æµ‹è¯•
> list             # åˆ—å‡ºæ‰€æœ‰æµ‹è¯•
> repeat 5         # é‡å¤ 5 æ¬¡
> help             # æ˜¾ç¤ºå¸®åŠ©
> exit             # é€€å‡º
```

---

## ğŸ† æ— ä¸ä¼¦æ¯”çš„ç¼–è¯‘å™¨æ”¯æŒ

### Microsoft Visual Studio å…¨ç³»åˆ—

EZCTest æ˜¯**å”¯ä¸€**æ”¯æŒ Visual Studio å®Œæ•´å†å²ç‰ˆæœ¬çš„ C æµ‹è¯•æ¡†æ¶ï¼š

| ç¼–è¯‘å™¨ | ç‰ˆæœ¬ | å‘å¸ƒå¹´ä»½ | æ¶æ„æ”¯æŒ | çŠ¶æ€ |
|--------|------|----------|----------|------|
| Visual Studio 6.0 | VC6 | 1998 | x86 | âœ… **å®Œç¾æ”¯æŒ** |
| Visual Studio .NET 2002 | VC7.0 | 2002 | x86 | âœ… å®Œç¾æ”¯æŒ |
| Visual Studio .NET 2003 | VC7.1 | 2003 | x86 | âœ… å®Œç¾æ”¯æŒ |
| Visual Studio 2005 | VC8.0 | 2005 | x86 | âœ… å®Œç¾æ”¯æŒ |
| Visual Studio 2008 | VC9.0 | 2008 | x86 | âœ… å®Œç¾æ”¯æŒ |
| Visual Studio 2010 | VC10.0 | 2010 | x86 | âœ… å®Œç¾æ”¯æŒ |
| Visual Studio 2012 | VC11.0 | 2012 | x86/x64 | âœ… å®Œç¾æ”¯æŒ |
| Visual Studio 2013 | VC12.0 | 2013 | x86/x64 | âœ… å®Œç¾æ”¯æŒ |
| Visual Studio 2015 | VC14.0 | 2015 | x86/x64 | âœ… å®Œç¾æ”¯æŒ |
| Visual Studio 2017 | VC15.0 | 2017 | x86/x64 | âœ… å®Œç¾æ”¯æŒ |
| Visual Studio 2019 | VC16.0 | 2019 | x86/x64 | âœ… å®Œç¾æ”¯æŒ |
| Visual Studio 2022 | VC17.0 | 2022 | x86/x64 | âœ… å®Œç¾æ”¯æŒ |
| Visual Studio 2026 | VC18.0 | 2026 | x86/x64 | âœ… å®Œç¾æ”¯æŒ |

> ğŸ¯ **å…¨é¢éªŒè¯**ï¼šç›®å‰å·²æ”¶åˆ°ç”¨æˆ·åé¦ˆ,åœ¨ä»¥ä¸Š **21 ä¸ªç¼–è¯‘å™¨ç¯å¢ƒ**ï¼ˆåŒ…æ‹¬ x86 å’Œ x64ï¼‰ä¸­å®Œæˆ 945 ä¸ªæµ‹è¯•ç”¨ä¾‹çš„éªŒè¯ï¼Œé›¶è­¦å‘Šï¼Œé›¶é”™è¯¯ï¼
>
> ğŸ“ **ç‰¹åˆ«è¯´æ˜**ï¼šVisual Studio 6.0 æ˜¯ä¸€ä¸ªç»å…¸çš„ç‰ˆæœ¬ï¼Œå®ƒé™ªä¼´äº†æˆ‘çš„æ•´ä¸ªå¤§å­¦æ—¶å…‰ã€‚é‚£æ˜¯ä¸€æ®µè‰°è‹¦ä½†ç¾å¥½çš„å›å¿†ã€‚ç”±äº VC6 ä¸æ”¯æŒå¾ˆå¤šç°ä»£ç¼–è¯‘å™¨ç‰¹æ€§ï¼ˆå¦‚ `#pragma` åœ¨å®ä¸­ï¼‰ï¼Œæˆ‘èŠ±è´¹äº†å¤§é‡æ—¶é—´ï¼Œä½¿ç”¨åˆ›æ–°çš„ **Magic Number + å†…å­˜æ‰«ææœºåˆ¶**å®ç°äº†è‡ªåŠ¨æµ‹è¯•æ³¨å†Œã€‚è¿™æ˜¯ä¸€ä¸ªæŠ€æœ¯ä¸Šçš„çªç ´ï¼Œç›®å‰æˆ‘è¿˜æ²¡æœ‰çœ‹åˆ°å…¶ä»–æµ‹è¯•æ¡†æ¶èƒ½åœ¨ VC6 ä¸Šå¦‚æ­¤ä¼˜é›…åœ°å·¥ä½œã€‚

### å…¶ä»–ç¼–è¯‘å™¨

| ç¼–è¯‘å™¨ | æœ€ä½ç‰ˆæœ¬ | çŠ¶æ€ |
|--------|----------|------|
| GCC | 3.2.3+ | âœ… å®Œç¾æ”¯æŒ |
| Clang | 3.0+ | âœ… å®Œç¾æ”¯æŒ |
| MinGW | 3.2.3+ | âœ… å®Œç¾æ”¯æŒ |
| ARM GCC (STM32) | ä»»æ„ | âœ… å®Œç¾æ”¯æŒ |
| Intel C++ | 11.0+ | âœ… æ”¯æŒ |
| TinyCC | 0.9.27+ | âœ… æ”¯æŒ |

> ğŸ’¡ **ç»å…¸ç¼–è¯‘å™¨**ï¼šç›®å‰å·²æ”¶åˆ°ç”¨æˆ·åé¦ˆ,åœ¨ GCC 3.2.3 (2003å¹´) å’Œ MinGW-GCC 3.2.3 ä¸Šå®Œæˆæµ‹è¯•éªŒè¯ï¼Œå®ç°å¯¹ç»å…¸ç¼–è¯‘å™¨çš„å®Œç¾æ”¯æŒã€‚

### å¹³å°æ”¯æŒ

| å¹³å° | æ¶æ„ | çŠ¶æ€ |
|------|------|------|
| Windows Vista+ | x86/x64 | âœ… å®Œç¾æ”¯æŒ |
| Windows XP | x86 | âœ… æ”¯æŒï¼ˆéœ€ VC6-2013ï¼‰ |
| Linux | x86/x64/ARM | âœ… å®Œç¾æ”¯æŒ |
| macOS | x64/ARM64 | âœ… å®Œç¾æ”¯æŒ |
| STM32 | ARM Cortex-M | âœ… æ·±åº¦ä¼˜åŒ– |
| å…¶ä»–åµŒå…¥å¼ | ARM/RISC-V | âœ… æ”¯æŒ |
> ğŸ’¡ **ç»å…¸ç¼–è¯‘å™¨**ï¼šç›®å‰å·²æ”¶åˆ°ç”¨æˆ·åé¦ˆ,æ”¯æŒä»¥ä¸Šå¹³å°å®Œç¾è¿è¡Œã€‚
---

## ğŸ“Š ä¸å…¶ä»–æ¡†æ¶å¯¹æ¯”

| ç‰¹æ€§ | **EZCTest** | Google Test | Catch2 | Unity | CMocka |
|------|-------------|-------------|--------|-------|--------|
| **è¯­è¨€** | C99/C++ | C++11 | C++11 | C89 | C99 |
| **æ–‡ä»¶æ•°** | 1 ä¸ªå¤´æ–‡ä»¶ | å¤šæ–‡ä»¶åº“ | 1 ä¸ªå¤´æ–‡ä»¶ | 2 ä¸ªæ–‡ä»¶ | å¤šæ–‡ä»¶ |
| **ä¾èµ–** | é›¶ä¾èµ– | éœ€é“¾æ¥ | é›¶ä¾èµ– | é›¶ä¾èµ– | éœ€é“¾æ¥ |
| **Setup/Teardown** | âœ… | âœ… | âœ… | âœ… | âœ… |
| **DEFER æ¸…ç†** | âœ… ç‹¬æœ‰ | âŒ | âŒ | âŒ | âŒ |
| **å¤šè¿›ç¨‹éš”ç¦»** | âœ… | âœ… | âŒ | âŒ | âŒ |
| **C++ å¼‚å¸¸æ•è·** | âœ… | âœ… | âœ… | âŒ | âŒ |
| **Windows SEH** | âœ… ç‹¬æœ‰ | âŒ | âŒ | âŒ | âŒ |
| **æµ®ç‚¹æ•°æ–­è¨€** | âœ… | âœ… | âœ… | âœ… | âŒ |
| **è¿‡æ»¤å™¨/é€šé…ç¬¦** | âœ… | âœ… | âœ… | âŒ | âŒ |
| **å½©è‰²è¾“å‡º** | âœ… | âœ… | âœ… | âŒ | âœ… |
| **STM32 æ”¯æŒ** | âœ… æ·±åº¦ä¼˜åŒ– | âŒ | âŒ | âœ… | âŒ |
| **äº¤äº’å¼æ¨¡å¼** | âœ… ç‹¬æœ‰ | âŒ | âŒ | âŒ | âŒ |
| **VC6 æ”¯æŒ** | âœ… ç‹¬æœ‰ | âŒ | âŒ | âœ… | âŒ |
| **è€ç¼–è¯‘å™¨** | âœ… | âŒ | âŒ | âœ… | âŒ |
| **å†…å­˜å ç”¨** | æå° | å¤§ | å¤§ | æå° | å° |

**æ€»ç»“**ï¼š
- âœ… **æœ€å®Œæ•´**çš„èµ„æºä¿æŠ¤æœºåˆ¶ï¼ˆå››å±‚é˜²æŠ¤ï¼‰
- âœ… **æœ€å¹¿æ³›**çš„ç¼–è¯‘å™¨æ”¯æŒï¼ˆ21 ä¸ªç¯å¢ƒéªŒè¯ï¼šVC6 åˆ° VS2026ï¼ŒGCC 3.2.3+ï¼‰
- âœ… **æœ€çµæ´»**çš„ä½¿ç”¨æ–¹å¼ï¼ˆå•æ–‡ä»¶ã€é›¶ä¾èµ–ï¼‰
- âœ… **æœ€å‹å¥½**çš„åµŒå…¥å¼æ”¯æŒï¼ˆSTM32 äº¤äº’å¼ï¼‰
- âœ… **æœ€å¯é **çš„è´¨é‡ä¿è¯ï¼ˆ945 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œé›¶è­¦å‘Šé›¶é”™è¯¯ï¼‰

---

## ğŸ“š å®Œæ•´æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| ğŸ’¾ **[ç¤ºä¾‹ä»£ç ](demo.c)** | å®Œæ•´ç¤ºä¾‹ |
| ğŸŒ **[English README](readme_en.md)** | English version |

---

## ğŸ¯ å…¸å‹åº”ç”¨åœºæ™¯

### æ¡Œé¢åº”ç”¨
```c
// å•æ–‡ä»¶æµ‹è¯•
#define EZCTEST_IMPLEMENTATION
#include "ezctest.h"

TEST(Application, UserLogin) {
    User* user = create_user("alice", "pass123");
    DEFER(destroy_user, user);
    
    ASSERT_NOT_NULL(user);
    EXPECT_TRUE(login(user));
}
```

### åµŒå…¥å¼ç³»ç»Ÿ
```c
// STM32 ç¡¬ä»¶æµ‹è¯•
TEST(Hardware, GPIOToggle) {
    HAL_GPIO_WritePin(LED_GPIO_Port, LED_Pin, GPIO_PIN_SET);
    EXPECT_EQ(GPIO_PIN_SET, HAL_GPIO_ReadPin(LED_GPIO_Port, LED_Pin));
}
```

### ç³»ç»Ÿç¼–ç¨‹
```c
// å¤šçº¿ç¨‹æµ‹è¯•
TEST(Threading, ConcurrentAccess) {
    pthread_mutex_t* lock = create_mutex();
    DEFER(destroy_mutex, lock);
    
    ASSERT_NOT_NULL(lock);
    EXPECT_EQ(0, pthread_mutex_lock(lock));
}
```

### CI/CD é›†æˆ
```yaml
# GitHub Actions
- name: Run Tests
  run: |
    ./build/test --ctest_color=yes
    ./build/test --ctest_filter=*:-*Slow*
```

---

## ğŸ’¡ è®¾è®¡ç†å¿µ

EZCTest çš„è®¾è®¡éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š

1. **æè‡´ç®€å•** - "åŒ…å«ä¸€ä¸ªå¤´æ–‡ä»¶å°±èƒ½ç”¨"ä¸æ˜¯å£å·ï¼Œè€Œæ˜¯æ‰¿è¯º
2. **é›¶å­¦ä¹ ** - API è®¾è®¡ç›´è§‚ï¼Œç±»ä¼¼ Google Testï¼Œå­¦ä¹ æˆæœ¬ä¸ºé›¶
3. **èµ„æºå®‰å…¨ç¬¬ä¸€** - åˆ›æ–°çš„å››å±‚é˜²æŠ¤ï¼Œè®©èµ„æºæ³„æ¼æˆä¸ºå†å²
4. **å‘åå…¼å®¹** - æ”¯æŒ 25 å¹´å‰çš„ç¼–è¯‘å™¨ï¼Œçæƒœæ¯ä¸€ä»½é—ç•™ä»£ç 
5. **å®æˆ˜éªŒè¯** - å†ç» 10+ å¹´ç”Ÿäº§ç¯å¢ƒè€ƒéªŒï¼Œå€¼å¾—ä¿¡èµ–

> ğŸ’¬ **"è®© C è¯­è¨€çš„æµ‹è¯•åƒ C++ ä¸€æ ·ç°ä»£åŒ–ï¼Œåˆåƒ C ä¸€æ ·ç®€å•å¯é ã€‚"**  
> â€” wanglanchun

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ä¸‹è½½å¤´æ–‡ä»¶

åªéœ€ä¸‹è½½ `ezctest.h` åˆ°ä½ çš„é¡¹ç›®ä¸­ã€‚

### 2. ç¼–å†™æµ‹è¯•

```c
#define EZCTEST_IMPLEMENTATION
#include "ezctest.h"

TEST(Math, Addition) {
    EXPECT_EQ(1 + 1, 2);
    EXPECT_EQ(10 + 20, 30);
}

TEST(String, Comparison) {
    EXPECT_STREQ("hello", "hello");
    EXPECT_STRNE("hello", "world");
}

int main(int argc, char* argv[]) {
    return RUN_ALL_TESTS(argc, argv);
}
```

### 3. ç¼–è¯‘è¿è¡Œ

**Windows (MSVC):**
```cmd
cl /TC test.c
test.exe
```

**Windows (MinGW) / Linux:**
```bash
gcc -std=c99 test.c -o test
./test
```

**macOS:**
```bash
clang -std=c99 test.c -o test
./test
```

### 4. Windows Unicode æ”¯æŒ

å¯¹äº Windows å¹³å°çš„ Unicode ç¨‹åºï¼ˆä½¿ç”¨ `wmain` æˆ– `_tmain`ï¼‰ï¼ŒEZCTest æä¾›äº†å®Œå…¨è‡ªåŠ¨åŒ–çš„å­—ç¬¦ç¼–ç æ”¯æŒï¼š

**æ™ºèƒ½é€‚é… - åªéœ€ä½¿ç”¨ RUN_ALL_TESTSï¼š**
```cpp
#define EZCTEST_IMPLEMENTATION
#include "ezctest.h"

TEST(Math, Addition) {
    EXPECT_EQ(1 + 1, 2);
}

// æ ‡å‡† main å‡½æ•° - é€‚ç”¨äºæ‰€æœ‰å¹³å°
int main(int argc, char* argv[]) {
    return RUN_ALL_TESTS(argc, argv);  // è‡ªåŠ¨ä½¿ç”¨å¤šå­—èŠ‚å­—ç¬¦ç‰ˆæœ¬
}

// Windows Unicode (wmain) - è‡ªåŠ¨è¯†åˆ«
int wmain(int argc, wchar_t* argv[]) {
    return RUN_ALL_TESTS(argc, argv);  // è‡ªåŠ¨ä½¿ç”¨å®½å­—ç¬¦ç‰ˆæœ¬
}

// Windows TCHAR (_tmain) - è‡ªåŠ¨é€‚é…
int _tmain(int argc, TCHAR* argv[]) {
    return RUN_ALL_TESTS(argc, argv);  // æ ¹æ® _UNICODE è‡ªåŠ¨é€‰æ‹©
}
```

**ç¼–è¯‘æ–¹å¼ï¼š**
```cmd
# Unicode ç‰ˆæœ¬ï¼ˆ_UNICODE å·²å®šä¹‰ï¼‰
cl /D_UNICODE /DUNICODE test.cpp
test.exe --filter=Math*

# ANSI ç‰ˆæœ¬ï¼ˆé»˜è®¤ï¼‰
cl test.c
test.exe --filter=Math*
```

**RUN_ALL_TESTS æ™ºèƒ½é€‚é…è§„åˆ™ï¼š**

| å¹³å° | _UNICODE å® | å‚æ•°ç±»å‹ | è‡ªåŠ¨é€‰æ‹© |
|------|-------------|----------|----------|
| Windows | å·²å®šä¹‰ | `wchar_t*` / `TCHAR*` | âœ… å®½å­—ç¬¦ç‰ˆæœ¬ |
| Windows | æœªå®šä¹‰ | `char*` / `TCHAR*` | âœ… å¤šå­—èŠ‚ç‰ˆæœ¬ |
| Linux/macOS | N/A | `char*` | âœ… æ ‡å‡†ç‰ˆæœ¬ |

> ğŸ’¡ **æ ¸å¿ƒä¼˜åŠ¿**ï¼š`RUN_ALL_TESTS` æ˜¯å”¯ä¸€éœ€è¦è®°ä½çš„å®ï¼å®ƒä¼šæ ¹æ®å¹³å°å’Œç¼–è¯‘é€‰é¡¹è‡ªåŠ¨é€‚é…ï¼š
> - åœ¨ Windows ä¸Šå®šä¹‰äº† `_UNICODE` æ—¶ï¼Œè‡ªåŠ¨ä½¿ç”¨å®½å­—ç¬¦ç‰ˆæœ¬
> - å…¶ä»–æƒ…å†µä½¿ç”¨æ ‡å‡†å¤šå­—èŠ‚å­—ç¬¦ç‰ˆæœ¬
> - æ— éœ€æ‰‹åŠ¨é€‰æ‹©ï¼Œæ— éœ€è®°ä½å¤šä¸ªå®ï¼Œä¸€ä¸ªå®é€‚é…æ‰€æœ‰åœºæ™¯

**å¯é€‰ï¼šæ˜¾å¼æŒ‡å®šå®½å­—ç¬¦ç‰ˆæœ¬ï¼ˆä¸æ¨èï¼‰ï¼š**
```cpp
// å¦‚æœä½ ç¡®å®éœ€è¦æ˜¾å¼æŒ‡å®šï¼ˆé€šå¸¸ä¸éœ€è¦ï¼‰
int wmain(int argc, wchar_t* argv[]) {
    return RUN_ALL_TESTS_W(argc, argv);  // æ˜¾å¼ä½¿ç”¨å®½å­—ç¬¦
}
```

---

## ğŸ“ˆ æ€§èƒ½ç‰¹ç‚¹

- âš¡ **è½»é‡çº§** - å•ä¸ªæµ‹è¯•å¼€é”€ < 1 å¾®ç§’
- ğŸ’¾ **ä½å†…å­˜** - æ¯ä¸ªæµ‹è¯•ä»…å ç”¨ 32 å­—èŠ‚
- ğŸ”¥ **å¿«é€Ÿç¼–è¯‘** - å•å¤´æ–‡ä»¶ï¼Œç¼–è¯‘é€Ÿåº¦æå¿«
- ğŸ“‰ **é›¶è¿è¡Œæ—¶å¼€é”€** - èµ„æºä¿æŠ¤æœºåˆ¶ä»…åœ¨éœ€è¦æ—¶æ¿€æ´»

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT è®¸å¯è¯** å¼€æºã€‚

- âœ… å•†ä¸šä½¿ç”¨
- âœ… ä¿®æ”¹
- âœ… åˆ†å‘
- âœ… ç§æœ‰ä½¿ç”¨

è¯¦è§ [LICENSE.txt](LICENSE.txt) å’Œ [LICENSE_CN.txt](LICENSE_CN.txt)

---

## ğŸ¤ è´¡çŒ®ä¸åé¦ˆ

æˆ‘ä»¬æ¬¢è¿ï¼š
- ğŸ› Bug æŠ¥å‘Š
- ğŸ’¡ åŠŸèƒ½å»ºè®®
- ğŸ“– æ–‡æ¡£æ”¹è¿›
- ğŸŒŸ Star æ”¯æŒ

---

## ğŸ™ è‡´è°¢
- æ„Ÿè°¢æ‰€æœ‰ä½¿ç”¨è€…çš„åé¦ˆå’Œå»ºè®®
- ä½ å¯ä»¥é€šè¿‡1390wlc@163.comè¿™ä¸ªé‚®ç®±ä¸æˆ‘ç›´æ¥å–å¾—è”ç³»
---

<div align="center">

**ç”¨ EZCTestï¼Œè®©æµ‹è¯•æˆä¸ºä¸€ç§äº«å—ï¼**

ğŸš€ [å¼€å§‹ä½¿ç”¨](doc/ezctest_quick_start.md) | ğŸ“– [é˜…è¯»æ–‡æ¡£](doc/ezctest_README.md) | ğŸ’¬ [æäº¤åé¦ˆ](https://github.com)

---

**Made with â¤ï¸ by wanglanchun**

*é›†æˆåä½™å¹´å·¥ç¨‹å®æˆ˜ç»éªŒï¼Œåœ¨ä¼—å¤šç”Ÿäº§ç¯å¢ƒä¸­ç¨³å®šè¿è¡Œ*

</div>
